---
import Link from '@/components/Link.astro'
import { buttonVariants } from '@/components/ui/button'
import { Icon } from 'astro-icon/components'
import { cn } from '@/lib/utils'
import type { VariantProps } from 'class-variance-authority'

interface Props {
  href: string
  icon?: string
  iconPosition?: 'left' | 'right'
  variant?: VariantProps<typeof buttonVariants>['variant']
  size?: VariantProps<typeof buttonVariants>['size']
  external?: boolean
  class?: string
  [key: string]: any
}

const {
  href,
  icon,
  iconPosition = 'left',
  variant = 'default',
  size = 'default',
  external = false,
  class: className,
  ...rest
} = Astro.props
---

<Link
  href={href}
  external={external}
  class={cn(
    buttonVariants({ variant, size }),
    'group shadow-lg',
    className
  )}
  {...rest}
>
  {icon && iconPosition === 'left' && (
    <span
      class="relative inline-flex h-4 items-center gap-2 overflow-hidden"
    >
      <Icon
        name={icon}
        class="absolute size-4 -translate-y-full transition-transform duration-300 ease-in-out group-hover:translate-y-0"
      />
      <Icon
        name={icon}
        class="size-4 translate-y-0 transition-transform duration-300 ease-in-out group-hover:translate-y-full"
      />
    </span>
  )}
  <slot />
  {icon && iconPosition === 'right' && (
    <span
      class="relative inline-flex w-4 items-center gap-2 overflow-hidden"
    >
      <Icon
        name={icon}
        class="absolute size-4 -translate-x-full transition-transform duration-300 ease-in-out group-hover:translate-x-0"
      />
      <Icon
        name={icon}
        class="size-4 translate-x-0 transition-transform duration-300 ease-in-out group-hover:translate-x-full"
      />
    </span>
  )}
</Link>

